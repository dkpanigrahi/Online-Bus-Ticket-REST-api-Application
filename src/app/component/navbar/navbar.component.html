<mat-toolbar color="primary">
  <img src="jayabilas.png" class="navbar-logo">

  <!-- Public View: When Not Logged In -->
  <button *ngIf="!isLoggedIn" mat-button routerLink="/">Home</button>
  <button *ngIf="!isLoggedIn" mat-button routerLink="/bus">Bus</button>
  <button *ngIf="!isLoggedIn" mat-button routerLink="/pricing">Book Ticket</button>

  <!-- User View: When Logged In as Regular User -->
  <button *ngIf="isLoggedIn && !isAdmin" mat-button routerLink="/user-home">Home</button>
  <button *ngIf="isLoggedIn && !isAdmin" mat-button routerLink="/bus">Search Bus</button>
  <button *ngIf="isLoggedIn && !isAdmin" mat-button routerLink="/pricing">Book Ticket</button>
  <button *ngIf="isLoggedIn && !isAdmin" mat-button routerLink="/view-tickets">View Ticket</button>

  <!-- Admin View: When Logged In as Admin -->
  <button *ngIf="isLoggedIn && isAdmin" mat-button routerLink="/admin-home">Home</button>
  <button
    *ngIf="isLoggedIn && isAdmin"
    mat-button
    [matMenuTriggerFor]="addMenu"
    matTooltip="Add items"
    aria-label="Add items dropdown"
  >
    Add
  </button>
  <mat-menu #addMenu="matMenu">
    <button mat-menu-item routerLink="/add-driver">Add Driver</button>
    <button mat-menu-item routerLink="/add-conductor">Add Conductor</button>
    <button mat-menu-item routerLink="/add-bus">Add Bus</button>
  </mat-menu>

  <button
    *ngIf="isLoggedIn && isAdmin"
    mat-button
    [matMenuTriggerFor]="viewMenu"
    matTooltip="View items"
    aria-label="View items dropdown"
  >
    View
  </button>
  <mat-menu #viewMenu="matMenu">
    <button mat-menu-item routerLink="/view-drivers">View Driver</button>
    <button mat-menu-item routerLink="/view-conductors">View Conductor</button>
    <button mat-menu-item routerLink="/view-buses">View Bus</button>
    <button mat-menu-item routerLink="/view-tickets">View Ticket</button>
  </mat-menu>

  <div class="spacer"></div>

  <!-- Authentication and Profile Buttons -->
  <button *ngIf="!isLoggedIn" mat-raised-button routerLink="/login" class="auth-button">Login</button>
  
  <!-- If logged in, show profile menu -->
  <div *ngIf="isLoggedIn" class="profile-container">
    <button mat-icon-button [matMenuTriggerFor]="profileMenu">
      <mat-icon>account_circle</mat-icon>
      <span>{{ profile.name }}</span>
    </button>

    <mat-menu #profileMenu="matMenu">
      <button mat-menu-item [routerLink]="['/profile']">
        <mat-icon>person</mat-icon>
        <span>Profile</span>
      </button>
      <button mat-menu-item [routerLink]="['/change-password']">
        <mat-icon>lock</mat-icon>
        <span>Change Password</span>
      </button>
      <button mat-menu-item (click)="logout()">
        <mat-icon>exit_to_app</mat-icon>
        <span>Logout</span>
      </button>
    </mat-menu>
  </div>
</mat-toolbar>
